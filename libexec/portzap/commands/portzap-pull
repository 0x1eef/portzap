#!/bin/sh
set -e

#
# globals
#
libexec="$(dirname "${0}")"/..
git="${libexec}"/scripts/git
repodir=$1

#
# functions
#
. "${libexec}"/functions/print.sh

#
# main
#
if [ ! -e "${repodir}"/.git ]; then
    printerr "repository should be cloned first"
    exit 1
fi

cd "${repodir}"
branch=$("${git}" branch --show-current)
"${git}" -c rebase.autostash=false \
    pull --no-ff --no-rebase origin "${branch}"
printok "pull complete"
